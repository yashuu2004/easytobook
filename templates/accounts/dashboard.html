{% extends 'base.html' %}

{% block title %}My Bookings - Easytobook{% endblock %}

{% block content %}
<div class="dashboard-header">
  <h1>My Bookings</h1>
  <p>View and manage your travel bookings.</p>
</div>

{% if bookings %}
<div class="booking-list">
  {% for b in bookings %}
  <div class="booking-item">
    <div>
      <strong>{{ b.trip.get_transport_type_display }}</strong>: {{ b.trip.source_city.name }} → {{ b.trip.destination_city.name }}<br>
      <span class="trip-time">{{ b.trip.date }} at {{ b.trip.time|time:"H:i" }} · {{ b.seats }} seat(s) · ₹{{ b.total_price }}</span>
    </div>
    <span class="badge {% if b.is_paid %}badge-paid{% else %}badge-pending{% endif %}">
      {% if b.is_paid %}Paid{% else %}Pending payment{% endif %}
    </span>
    {% if not b.is_paid %}
    <a href="{% url 'payments:payment' b.id %}" class="btn btn-primary">Pay Now</a>
    {% endif %}
  </div>
  {% endfor %}
</div>
{% else %}
<div class="empty-state">
  <p>You have no bookings yet.</p>
  <a href="{% url 'trips:search' %}" class="btn btn-primary">Search Trips</a>
</div>
{% endif %}
{% endblock %}
